/* Vanilla-DataTables
 * Copyright (c) 2015-2017 Karl Saunders (https://github.com/Mobius1/Vanilla-DataTables/wiki)
 * Licensed under MIT (http://www.opensource.org/licenses/mit-license.php)
 * Version: 1.6.16
 */
!function(t,e){var a="DataTable";"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define([],e()):t[a]=e()}("undefined"!=typeof global?global:this.window||this.global,function(t){"use strict";var f=window,s=document,d=s.body;function h(t){return"[object Object]"===Object.prototype.toString.call(t)}function c(t){return Array.isArray(t)}function g(t,e,a){if(h(t))for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(a,t[i],i);else for(i=0;i<t.length;i++)e.call(a,t[i],i)}function p(t,e,a){t.addEventListener(e,a,!1)}function u(t,e){var a,i=s.createElement(t);if(e&&"object"==typeof e)for(a in e)"html"===a?i.innerHTML=e[a]||"":i.setAttribute(a,e[a]);return i}function n(t,e,a){return u("li",{class:t,html:'<a href="#" data-page="'+e+'">'+a+"</a>"})}function b(t,e){var a,i;1===e?(a=0,i=t.length):-1===e&&(a=t.length-1,i=-1);for(var n=!0;n;){n=!1;for(var s,r,o=a;o!=i;o+=e)t[o+e]&&t[o].value>t[o+e].value&&(r=t[o],s=t[o+e],r=r,t[o]=s,t[o+e]=r,n=!0)}return t}function e(t){return this.dt=t,this}var m=function(t,e){for(var a in e){var i;e.hasOwnProperty(a)&&((i=e[a])&&h(i)?(t[a]=t[a]||{},m(t[a],i)):t[a]=i)}return t},r=function(t,e){if(t instanceof NodeList)g(t,function(t){r(t,e)});else if(e)for(;t.hasChildNodes();)t.removeChild(t.firstChild);else t.innerHTML=""},v={add:function(t,e){t.classList?t.classList.add(e):v.contains(t,e)||(t.className=t.className.trim()+" "+e)},remove:function(t,e){t.classList?t.classList.remove(e):v.contains(t,e)&&(t.className=t.className.replace(new RegExp("(^|\\s)"+e.split(" ").join("|")+"(\\s|$)","gi")," "))},contains:function(t,e){if(t)return t.classList?t.classList.contains(e):!!t.className&&!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}};e.prototype.swap=function(t){var a,e,i;t.length&&2===t.length&&(a=[],g(this.dt.headings,function(t,e){a.push(e)}),e=t[0],i=t[1],t=a[i],a[i]=a[e],a[e]=t,this.order(a))},e.prototype.order=function(e){var a,i,n,s,r,o,l=[[],[],[],[]],d=this.dt;g(e,function(t,e){s=d.headings[t],r="false"!==s.getAttribute("data-sortable"),(a=s.cloneNode(!0)).originalCellIndex=e,a.sortable=r,l[0].push(a),d.hiddenColumns.indexOf(t)<0&&((s=s.cloneNode(!0)).originalCellIndex=e,s.sortable=r,l[1].push(s))}),g(d.data,function(a,t){i=a.cloneNode(),n=a.cloneNode(),i.dataIndex=n.dataIndex=t,null!==a.searchIndex&&void 0!==a.searchIndex&&(i.searchIndex=n.searchIndex=a.searchIndex),g(e,function(t,e){(o=a.cells[t].cloneNode(!0)).data=a.cells[t].data,i.appendChild(o),d.hiddenColumns.indexOf(t)<0&&((o=a.cells[t].cloneNode(!0)).data=a.cells[t].data,n.appendChild(o))}),l[2].push(i),l[3].push(n)}),d.headings=l[0],d.activeHeadings=l[1],d.data=l[2],d.activeRows=l[3],d.update()},e.prototype.hide=function(t){var e;t.length&&(e=this.dt,g(t,function(t){e.hiddenColumns.indexOf(t)<0&&e.hiddenColumns.push(t)}),this.rebuild())},e.prototype.show=function(t){var e,a;t.length&&(a=this.dt,g(t,function(t){-1<(e=a.hiddenColumns.indexOf(t))&&a.hiddenColumns.splice(e,1)}),this.rebuild())},e.prototype.visible=function(t){var e,a=this.dt;return t=t||a.headings.map(function(t){return t.originalCellIndex}),isNaN(t)?c(t)&&(e=[],g(t,function(t){e.push(a.hiddenColumns.indexOf(t)<0)})):e=a.hiddenColumns.indexOf(t)<0,e},e.prototype.add=function(a){var i,n=this,t=document.createElement("th");if(!this.dt.headings.length)return this.dt.insert({headings:[a.heading],data:a.data.map(function(t){return[t]})}),void this.rebuild();this.dt.hiddenHeader?t.innerHTML="":a.heading.nodeName?t.appendChild(a.heading):t.innerHTML=a.heading,this.dt.headings.push(t),g(this.dt.data,function(t,e){a.data[e]&&(i=document.createElement("td"),a.data[e]&&a.data[e].length||(a.data[e]=""),a.data[e].nodeName?i.appendChild(a.data[e]):i.innerHTML=a.data[e],i.data=i.innerHTML,a.render&&(i.innerHTML=a.render.call(n,i.data,i,t)),t.appendChild(i))}),a.type&&t.setAttribute("data-type",a.type),a.format&&t.setAttribute("data-format",a.format),a.hasOwnProperty("style")&&Object.assign(t.style,a.style),a.hasOwnProperty("class")&&t.classList.add(a.class),a.hasOwnProperty("sortable")&&(t.sortable=a.sortable,t.setAttribute("data-sortable",!0===a.sortable?"true":"false")),this.rebuild(),this.dt.renderHeader()},e.prototype.remove=function(e){c(e)?(e.sort(function(t,e){return e-t}),g(e,function(t){this.remove(t)},this)):(this.dt.headings.splice(e,1),g(this.dt.data,function(t){t.removeChild(t.cells[e])})),this.rebuild()},e.prototype.sort=function(n,t,e){var a=this.dt;if(a.hasHeadings&&(n<1||n>a.activeHeadings.length))return!1;a.sorting=!0,--n;var i,s,r,o=a.data,l=[],d=[],h=0,c=0,p=a.activeHeadings[n];n=p.originalCellIndex,g(o,function(t){var e=t.cells[n],a=e.hasAttribute("data-content")?e.getAttribute("data-content"):e.data,i=a.replace(/(\$|\,|\s|%)/g,"");"date"===p.getAttribute("data-type")&&f.moment&&(e=!1,p.hasAttribute("data-format")&&(e=p.getAttribute("data-format")),i=function(t,e){var a=!1;if(e)switch(e){case"ISO_8601":a=moment(t,moment.ISO_8601).format("YYYYMMDD");break;case"RFC_2822":a=moment(t,"ddd, MM MMM YYYY HH:mm:ss ZZ").format("YYYYMMDD");break;case"MYSQL":a=moment(t,"YYYY-MM-DD hh:mm:ss").format("YYYYMMDD");break;case"UNIX":a=moment(t).unix();break;default:a=moment(t,e).format("YYYYMMDD")}return a}(a,e)),parseFloat(i)==i?d[c++]={value:Number(i),row:t}:l[h++]={value:a,row:t}}),"desc"==t||!t&&v.contains(p,"asc")?(s=b(l,-1),r=b(d,-1),i="descending",v.remove(p,"asc"),v.add(p,"desc")):(s=b(d,1),r=b(l,1),i="ascending",v.remove(p,"desc"),v.add(p,"asc")),a.lastTh&&p!=a.lastTh&&(v.remove(a.lastTh,"desc"),v.remove(a.lastTh,"asc")),a.lastTh=p,o=s.concat(r),a.data=[];var u=[];g(o,function(t,e){a.data.push(t.row),null!==t.row.searchIndex&&void 0!==t.row.searchIndex&&u.push(e)},a),a.searchData=u,this.rebuild(),a.update(),e||a.emit("datatable.sort",n,i)},e.prototype.rebuild=function(){var a,i,n,s=this.dt,r=[];s.activeRows=[],s.activeHeadings=[],g(s.headings,function(t,e){t.originalCellIndex=e,t.sortable="false"!==t.getAttribute("data-sortable"),s.hiddenColumns.indexOf(e)<0&&s.activeHeadings.push(t)},this),g(s.data,function(t,e){a=t.cloneNode(),i=t.cloneNode(),a.dataIndex=i.dataIndex=e,null!==t.searchIndex&&void 0!==t.searchIndex&&(a.searchIndex=i.searchIndex=t.searchIndex),g(t.cells,function(t){(n=t.cloneNode(!0)).data=t.data,a.appendChild(n),s.hiddenColumns.indexOf(t.cellIndex)<0&&((n=t.cloneNode(!0)).data=t.data,i.appendChild(n))}),r.push(a),s.activeRows.push(i)}),s.data=r,s.update()};function a(t,e){return this.dt=t,this.rows=e,this}a.prototype.build=function(a){var i,n=u("tr"),t=this.dt.headings;return t.length||(t=a.map(function(){return""})),g(t,function(t,e){i=u("td"),a[e]&&a[e].length||(a[e]=""),i.innerHTML=a[e],i.data=a[e],n.appendChild(i)}),n},a.prototype.render=function(t){return t},a.prototype.add=function(t){var a;c(t)&&(a=this.dt,c(t[0])?g(t,function(t,e){a.data.push(this.build(t))},this):a.data.push(this.build(t)),a.data.length&&(a.hasRows=!0),this.update(),a.columns().rebuild())},a.prototype.remove=function(t){var a=this.dt;c(t)?(t.sort(function(t,e){return e-t}),g(t,function(t,e){a.data.splice(t,1)})):a.data.splice(t,1),this.update(),a.columns().rebuild()},a.prototype.update=function(){g(this.dt.data,function(t,e){t.dataIndex=e})};function i(t,e){if(this.initialized=!1,this.options=m({perPage:10,perPageSelect:[5,10,15,20,25],sortable:!0,searchable:!0,nextPrev:!0,firstLast:!1,prevText:"&lsaquo;",nextText:"&rsaquo;",firstText:"&laquo;",lastText:"&raquo;",ellipsisText:"&hellip;",ascText:"▴",descText:"▾",truncatePager:!0,pagerDelta:2,fixedColumns:!0,fixedHeight:!1,header:!0,footer:!1,labels:{placeholder:"Search...",perPage:"{select} entries per page",noRows:"No entries found",info:"Showing {start} to {end} of {rows} entries"},layout:{top:"{select}{search}",bottom:"{info}{pager}"}},e),"string"==typeof t&&(t=document.querySelector(t)),this.initialLayout=t.innerHTML,this.initialSortable=this.options.sortable,this.options.header||(this.options.sortable=!1),null===t.tHead&&(this.options.data&&(!this.options.data||this.options.data.headings)||(this.options.sortable=!1)),t.tBodies.length&&!t.tBodies[0].rows.length&&this.options.data&&!this.options.data.data)throw new Error("You seem to be using the data option, but you've not defined any rows.");this.table=t,this.init()}i.extend=function(t,e){"function"==typeof e?i.prototype[t]=e:i[t]=e};var o=i.prototype;return o.init=function(t){if(this.initialized||v.contains(this.table,"dataTable-table"))return!1;var a=this;this.options=m(this.options,t||{}),this.isIE=!!/(msie|trident)/i.test(navigator.userAgent),this.currentPage=1,this.onFirstPage=!0,this.hiddenColumns=[],this.columnRenderers=[],this.selectedColumns=[],this.render(),setTimeout(function(){a.emit("datatable.init"),a.initialized=!0,a.options.plugins&&g(a.options.plugins,function(t,e){a[e]&&"function"==typeof a[e]&&(a[e]=a[e](t,{each:g,extend:m,classList:v,createElement:u}),t.enabled&&a[e].init&&"function"==typeof a[e].init&&a[e].init())})},10)},o.render=function(t){if(t){switch(t){case"page":this.renderPage();break;case"pager":this.renderPager();break;case"header":this.renderHeader()}return!1}var a,i,e,n,s=this,r=s.options,o="";r.data&&function(a){var e,t=!1,i=!1;(a=a||this.options.data).headings&&(t=u("thead"),e=u("tr"),g(a.headings,function(t){t=u("th",{html:t});e.appendChild(t)}),t.appendChild(e)),a.data&&a.data.length&&(i=u("tbody"),g(a.data,function(t){if(a.headings&&a.headings.length!==t.length)throw new Error("The number of rows do not match the number of headings.");var e=u("tr");g(t,function(t){t=u("td",{html:t});e.appendChild(t)}),i.appendChild(e)})),t&&(null!==this.table.tHead&&this.table.removeChild(this.table.tHead),this.table.appendChild(t)),i&&(this.table.tBodies.length&&this.table.removeChild(this.table.tBodies[0]),this.table.appendChild(i))}.call(s),r.ajax&&(a=r.ajax,i=new XMLHttpRequest,p(i,"progress",function(t){s.emit("datatable.ajax.progress",t,i)}),p(i,"load",function(t){var e;4===i.readyState&&(s.emit("datatable.ajax.loaded",t,i),200===i.status?((e={}).data=a.load?a.load.call(s,i):i.responseText,e.type="json",a.content&&a.content.type&&(e.type=a.content.type,e=m(e,a.content)),s.import(e),s.setColumns(!0),s.emit("datatable.ajax.success",t,i)):s.emit("datatable.ajax.error",t,i))}),p(i,"error",function(t){s.emit("datatable.ajax.error",t,i)}),p(i,"abort",function(t){s.emit("datatable.ajax.abort",t,i)}),s.emit("datatable.ajax.loading",i),i.open("GET","string"==typeof a?r.ajax:r.ajax.url),i.send()),s.body=s.table.tBodies[0],s.head=s.table.tHead,s.foot=s.table.tFoot,s.body||(s.body=u("tbody"),s.table.appendChild(s.body)),s.hasRows=0<s.body.rows.length,s.head||(t=u("thead"),e=u("tr"),s.hasRows&&(g(s.body.rows[0].cells,function(){e.appendChild(u("th"))}),t.appendChild(e)),s.head=t,s.table.insertBefore(s.head,s.body),s.hiddenHeader=!r.ajax),s.headings=[],s.hasHeadings=0<s.head.rows.length,s.hasHeadings&&(s.header=s.head.rows[0],s.headings=[].slice.call(s.header.cells)),r.header||s.head&&s.table.removeChild(s.table.tHead),r.footer?s.head&&!s.foot&&(s.foot=u("tfoot",{html:s.head.innerHTML}),s.table.appendChild(s.foot)):s.foot&&s.table.removeChild(s.table.tFoot),s.wrapper=u("div",{class:"dataTable-wrapper dataTable-loading"}),o+="<div class='dataTable-top'>",o+=r.layout.top,o+="</div>",o+="<div class='dataTable-container'></div>",o+="<div class='dataTable-bottom'>",o+=r.layout.bottom,o=(o+="</div>").replace("{info}","<div class='dataTable-info'></div>"),o=r.perPageSelect?(l="<div class='dataTable-dropdown'><label>",l+=r.labels.perPage,l+="</label></div>",n=u("select",{class:"dataTable-selector"}),g(r.perPageSelect,function(t){var e=t===r.perPage,e=new Option(t,t,e,e);n.add(e)}),l=l.replace("{select}",n.outerHTML),o.replace("{select}",l)):o.replace("{select}",""),o=r.searchable?(d="<div class='dataTable-search'><input class='dataTable-input' placeholder='"+r.labels.placeholder+"' type='text'></div>",o.replace("{search}",d)):o.replace("{search}",""),s.hasHeadings&&this.render("header"),v.add(s.table,"dataTable-table");var l=u("div",{class:"dataTable-pagination"}),d=u("ul");l.appendChild(d),o=o.replace(/\{pager\}/g,l.outerHTML),s.wrapper.innerHTML=o,s.container=s.wrapper.querySelector(".dataTable-container"),s.pagers=s.wrapper.querySelectorAll(".dataTable-pagination"),s.label=s.wrapper.querySelector(".dataTable-info"),s.table.parentNode.replaceChild(s.wrapper,s.table),s.container.appendChild(s.table),s.rect=s.table.getBoundingClientRect(),s.data=[].slice.call(s.body.rows),s.activeRows=s.data.slice(),s.activeHeadings=s.headings.slice(),s.update(),r.ajax||s.setColumns(),this.fixHeight(),s.fixColumns(),r.header||v.add(s.wrapper,"no-header"),r.footer||v.add(s.wrapper,"no-footer"),r.sortable&&v.add(s.wrapper,"sortable"),r.searchable&&v.add(s.wrapper,"searchable"),r.fixedHeight&&v.add(s.wrapper,"fixed-height"),r.fixedColumns&&v.add(s.wrapper,"fixed-columns"),s.bindEvents()},o.renderPage=function(){var e;this.hasRows&&this.totalPages?(this.currentPage>this.totalPages&&(this.currentPage=1),n=this.currentPage-1,e=s.createDocumentFragment(),this.hasHeadings&&(r(this.header,this.isIE),g(this.activeHeadings,function(t){this.header.appendChild(t)},this)),g(this.pages[n],function(t){e.appendChild(this.rows().render(t))},this),this.clear(e),this.onFirstPage=1===this.currentPage,this.onLastPage=this.currentPage===this.lastPage):this.clear();var t,a,i=0,n=0;this.totalPages&&(n=(i=(t=this.currentPage-1)*this.options.perPage)+this.pages[t].length,i+=1,a=(this.searching?this.searchData:this.data).length),this.label&&this.options.labels.info.length&&(n=this.options.labels.info.replace("{start}",i).replace("{end}",n).replace("{page}",this.currentPage).replace("{pages}",this.totalPages).replace("{rows}",a),this.label.innerHTML=a?n:""),1==this.currentPage&&this.fixHeight()},o.renderPager=function(){var t,e,a,i;r(this.pagers,this.isIE),1<this.totalPages&&(t="pager",e=s.createDocumentFragment(),i=this.onFirstPage?1:this.currentPage-1,a=this.onlastPage?this.totalPages:this.currentPage+1,this.options.firstLast&&e.appendChild(n(t,1,this.options.firstText)),this.options.nextPrev&&e.appendChild(n(t,i,this.options.prevText)),i=this.links,this.options.truncatePager&&(i=function(i,t,e,a,n){var s,r=2*(a=a||2),o=t-a,l=t+a,d=[],h=[];t<4-a+r?l=3+r:e-(3-a+r)<t&&(o=e-(2+r));for(var c,p=1;p<=e;p++)(1==p||p==e||o<=p&&p<=l)&&(c=i[p-1],v.remove(c,"active"),d.push(c));return g(d,function(t){var e,a=t.children[0].getAttribute("data-page");s&&(a-(e=s.children[0].getAttribute("data-page"))==2?h.push(i[e]):a-e!=1&&(e=u("li",{class:"ellipsis",html:'<a href="#">'+n+"</a>"}),h.push(e))),h.push(t),s=t}),h}(this.links,this.currentPage,this.pages.length,this.options.pagerDelta,this.options.ellipsisText)),v.add(this.links[this.currentPage-1],"active"),g(i,function(t){v.remove(t,"active"),e.appendChild(t)}),v.add(this.links[this.currentPage-1],"active"),this.options.nextPrev&&e.appendChild(n(t,a,this.options.nextText)),this.options.firstLast&&e.appendChild(n(t,this.totalPages,this.options.lastText)),g(this.pagers,function(t){t.appendChild(e.cloneNode(!0))}))},o.renderHeader=function(){var a=this;a.labels=[],a.headings&&a.headings.length&&g(a.headings,function(t,e){a.labels[e]=t.textContent,v.contains(t.firstElementChild,"dataTable-sorter")&&(t.innerHTML=t.firstElementChild.innerHTML),t.sortable="false"!==t.getAttribute("data-sortable"),t.originalCellIndex=e,a.options.sortable&&t.sortable&&(e=u("a",{href:"#",class:"dataTable-sorter",html:t.innerHTML}),t.innerHTML="",t.setAttribute("data-sortable",""),t.appendChild(e))}),a.fixColumns()},o.bindEvents=function(){var t,a=this,i=a.options;!i.perPageSelect||(t=a.wrapper.querySelector(".dataTable-selector"))&&p(t,"change",function(t){i.perPage=parseInt(this.value,10),a.update(),a.fixHeight(),a.emit("datatable.perpage",i.perPage)}),i.searchable&&(a.input=a.wrapper.querySelector(".dataTable-input"),a.input&&p(a.input,"keyup",function(t){a.search(this.value)})),p(a.wrapper,"click",function(t){var e=t.target;"a"===e.nodeName.toLowerCase()&&(e.hasAttribute("data-page")?(a.page(e.getAttribute("data-page")),t.preventDefault()):i.sortable&&v.contains(e,"dataTable-sorter")&&"false"!=e.parentNode.getAttribute("data-sortable")&&(a.columns().sort(a.activeHeadings.indexOf(e.parentNode)+1),t.preventDefault()))})},o.setColumns=function(t){var n=this;t||g(n.data,function(t){g(t.cells,function(t){t.data=t.innerHTML})}),n.options.columns&&n.headings.length&&g(n.options.columns,function(a){c(a.select)||(a.select=[a.select]),a.hasOwnProperty("render")&&"function"==typeof a.render&&(n.selectedColumns=n.selectedColumns.concat(a.select),n.columnRenderers.push({columns:a.select,renderer:a.render})),g(a.select,function(t){var e=n.headings[t];a.type&&e.setAttribute("data-type",a.type),a.format&&e.setAttribute("data-format",a.format),a.hasOwnProperty("sortable")&&e.setAttribute("data-sortable",a.sortable),a.hasOwnProperty("style")&&Object.assign(e.style,a.style),a.hasOwnProperty("class")&&e.classList.add(a.class),a.hasOwnProperty("hidden")&&!1!==a.hidden&&n.columns().hide(t),a.hasOwnProperty("sort")&&1===a.select.length&&n.columns().sort(a.select[0]+1,a.sort,!0)})}),n.hasRows&&(g(n.data,function(t,e){t.dataIndex=e,g(t.cells,function(t){t.data=t.innerHTML})}),n.selectedColumns.length&&g(n.data,function(i){g(i.cells,function(e,a){-1<n.selectedColumns.indexOf(a)&&g(n.columnRenderers,function(t){-1<t.columns.indexOf(a)&&(e.innerHTML=t.renderer.call(n,e.data,e,i))})})}),n.columns().rebuild()),n.render("header")},o.destroy=function(){this.table.innerHTML=this.initialLayout,v.remove(this.table,"dataTable-table"),this.wrapper.parentNode.replaceChild(this.table,this.wrapper),this.initialized=!1},o.update=function(){this.paginate(this),this.render("page"),this.links=[];for(var t=this.pages.length;t--;){var e=t+1;this.links[t]=n(0===t?"active":"",e,e)}this.sorting=!1,this.render("pager"),this.rows().update(),this.emit("datatable.update")},o.paginate=function(){var a=this.options.perPage,i=this.activeRows;return this.searching&&(i=[],g(this.searchData,function(t){i.push(this.activeRows[t])},this)),this.pages=i.map(function(t,e){return e%a==0?i.slice(e,e+a):null}).filter(function(t){return t}),this.totalPages=this.lastPage=this.pages.length,this.totalPages},o.fixColumns=function(){var e,t,a,i,n;this.options.fixedColumns&&this.activeHeadings&&this.activeHeadings.length&&(t=!1,this.table.tHead?g(this.activeHeadings,function(t,e){var a;this.options.columns&&(a=this.options.columns.filter(function(t){return-1<t.select.indexOf(e)})[0]),t.hasOwnProperty("class")||a&&a.style&&a.style.width||(t.style.width=t.offsetWidth/this.rect.width*100+"%")},this):(e=[],t=u("thead"),a=u("tr"),i=this.table.tBodies[0].rows[0].cells,g(i,function(){var t=u("th");a.appendChild(t),e.push(t)}),t.appendChild(a),this.table.insertBefore(t,this.body),n=[],g(e,function(t,e){n.push(t.offsetWidth/this.rect.width*100)},this),g(this.data,function(t){g(t.cells,function(t,e){this.columns(t.cellIndex).visible()&&(t.style.width=n[e]+"%")},this)},this),this.table.removeChild(t)))},o.fixHeight=function(){this.options.fixedHeight&&(this.container.style.height=null,this.rect=this.container.getBoundingClientRect(),this.container.style.height=this.rect.height+"px")},o.search=function(a){if(!this.hasRows)return!1;var r=this;if(a=a.toLowerCase(),this.currentPage=1,this.searching=!0,this.searchData=[],!a.length)return this.searching=!1,this.update(),this.emit("datatable.search",a,this.searchData),v.remove(this.wrapper,"search-results"),!1;this.clear(),g(this.data,function(s,t){var e=-1<this.searchData.indexOf(s);a.split(" ").reduce(function(t,e){for(var a=!1,i=null,n=0;n<s.cells.length;n++)if(-1<((i=s.cells[n]).hasAttribute("data-content")?i.getAttribute("data-content"):i.textContent).toLowerCase().indexOf(e)&&r.columns(i.cellIndex).visible()){a=!0;break}return t&&a},!0)&&!e?(s.searchIndex=t,this.searchData.push(t)):s.searchIndex=null},this),v.add(this.wrapper,"search-results"),r.searchData.length?r.update():(v.remove(r.wrapper,"search-results"),r.setMessage(r.options.labels.noRows)),this.emit("datatable.search",a,this.searchData)},o.page=function(t){return t!=this.currentPage&&(isNaN(t)||(this.currentPage=parseInt(t,10)),!(t>this.pages.length||t<0)&&(this.render("page"),this.render("pager"),void this.emit("datatable.page",t)))},o.sortColumn=function(t,e){this.columns().sort(t,e)},o.insert=function(t){var e,a,i=this,n=[];h(t)?(t.headings&&(i.hasHeadings||i.hasRows||(e=u("tr"),g(t.headings,function(t){a=u("th",{html:t}),e.appendChild(a)}),i.head.appendChild(e),i.header=e,i.headings=[].slice.call(e.cells),i.hasHeadings=!0,i.options.sortable=i.initialSortable,i.render("header"))),t.data&&c(t.data)&&(n=t.data)):c(t)&&g(t,function(t){var a=[];g(t,function(t,e){e=i.labels.indexOf(e);-1<e&&(a[e]=t)}),n.push(a)}),n.length&&(i.rows().add(n),i.hasRows=!0),i.update(),i.fixColumns()},o.refresh=function(){this.options.searchable&&(this.input.value="",this.searching=!1),this.currentPage=1,this.onFirstPage=!0,this.update(),this.emit("datatable.refresh")},o.clear=function(t){this.body&&r(this.body,this.isIE);var e=this.body;this.body||(e=this.table),t&&("string"==typeof t&&(s.createDocumentFragment().innerHTML=t),e.appendChild(t))},o.export=function(t){if(!this.hasHeadings&&!this.hasRows)return!1;var e,a,i,n=this.activeHeadings,s=[],r=[];if(!h(t))return!1;var o,l=m({download:!0,skipColumn:[],lineDelimiter:"\n",columnDelimiter:",",tableName:"myTable",replacer:null,space:4},t);if(l.type){if("txt"!==l.type&&"csv"!==l.type||(s[0]=this.header),l.selection)if(isNaN(l.selection)){if(c(l.selection))for(e=0;e<l.selection.length;e++)s=s.concat(this.pages[l.selection[e]-1])}else s=s.concat(this.pages[l.selection-1]);else s=s.concat(this.activeRows);if(s.length){if("txt"===l.type||"csv"===l.type){for(i="",e=0;e<s.length;e++){for(a=0;a<s[e].cells.length;a++)l.skipColumn.indexOf(n[a].originalCellIndex)<0&&this.columns(n[a].originalCellIndex).visible()&&(-1<(o=(o=(o=(o=(o=s[e].texts[a].textContent).trim()).replace(/\s{2,}/g," ")).replace(/\n/g,"  ")).replace(/"/g,'""')).indexOf(",")&&(o='"'+o+'"'),i+=o+l.columnDelimiter);i=i.trim().substring(0,i.length-1),i+=l.lineDelimiter}i=i.trim().substring(0,i.length-1),l.download&&(i="data:text/csv;charset=utf-8,"+i)}else if("sql"===l.type){for(i="INSERT INTO `"+l.tableName+"` (",e=0;e<n.length;e++)l.skipColumn.indexOf(n[e].originalCellIndex)<0&&this.columns(n[e].originalCellIndex).visible()&&(i+="`"+n[e].textContent+"`,");for(i=i.trim().substring(0,i.length-1),i+=") VALUES ",e=0;e<s.length;e++){for(i+="(",a=0;a<s[e].cells.length;a++)l.skipColumn.indexOf(n[a].originalCellIndex)<0&&this.columns(n[a].originalCellIndex).visible()&&(i+='"'+s[e].cells[a].textContent+'",');i=i.trim().substring(0,i.length-1),i+="),"}i=i.trim().substring(0,i.length-1),i+=";",l.download&&(i="data:application/sql;charset=utf-8,"+i)}else if("json"===l.type){for(a=0;a<s.length;a++)for(r[a]=r[a]||{},e=0;e<n.length;e++)l.skipColumn.indexOf(n[e].originalCellIndex)<0&&this.columns(n[e].originalCellIndex).visible()&&(r[a][n[e].textContent]=s[a].cells[e].textContent);i=JSON.stringify(r,l.replacer,l.space),l.download&&(i="data:application/json;charset=utf-8,"+i)}return l.download&&(l.filename=l.filename||"datatable_export",l.filename+="."+l.type,i=encodeURI(i),(t=document.createElement("a")).href=i,t.download=l.filename,d.appendChild(t),t.click(),d.removeChild(t)),i}}return!1},o.import=function(a){var t,i=!1;return h(a)&&((a=m({lineDelimiter:"\n",columnDelimiter:","},a)).data.length||h(a.data))&&("csv"===a.type?(i={data:[]},(t=a.data.split(a.lineDelimiter)).length&&(a.headings&&(i.headings=t[0].split(a.columnDelimiter),t.shift()),g(t,function(t,e){i.data[e]=[];t=t.split(a.columnDelimiter);t.length&&g(t,function(t){i.data[e].push(t)})}))):"json"===a.type&&((t=function(t){var e=!1;try{e=JSON.parse(t)}catch(t){return!1}return!(null===e||!c(e)&&!h(e))&&e}(a.data))?(i={headings:[],data:[]},g(t,function(t,a){i.data[a]=[],g(t,function(t,e){i.headings.indexOf(e)<0&&i.headings.push(e),i.data[a].push(t)})})):console.warn("That's not valid JSON!")),h(a.data)&&(i=a.data),i&&this.insert(i)),!1},o.print=function(){var t=this.activeHeadings,e=this.activeRows,a=u("table"),i=u("thead"),n=u("tbody"),s=u("tr");g(t,function(t){s.appendChild(u("th",{html:t.textContent}))}),i.appendChild(s),g(e,function(t){var e=u("tr");g(t.cells,function(t){e.appendChild(u("td",{html:t.textContent}))}),n.appendChild(e)}),a.appendChild(i),a.appendChild(n);i=f.open();i.document.body.appendChild(a),i.print()},o.setMessage=function(t){var e=1;this.hasRows&&(e=this.data[0].cells.length),this.clear(u("tr",{html:'<td class="dataTables-empty" colspan="'+e+'">'+t+"</td>"}))},o.columns=function(t){return new e(this)},o.rows=function(t){return new a(this,t)},o.on=function(t,e){this.events=this.events||{},this.events[t]=this.events[t]||[],this.events[t].push(e)},o.off=function(t,e){this.events=this.events||{},t in this.events!=!1&&this.events[t].splice(this.events[t].indexOf(e),1)},o.emit=function(t){if(this.events=this.events||{},t in this.events!=!1)for(var e=0;e<this.events[t].length;e++)this.events[t][e].apply(this,Array.prototype.slice.call(arguments,1))},i});